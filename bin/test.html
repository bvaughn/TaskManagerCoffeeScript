<html>
<head>
</head>
<body>
	<!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>-->
	<script type="text/javascript" src="task_manager.js"></script>
	<script type="text/javascript">
		var task1 =
			new TaskWithClosure(
					function() {
						console.log( "Custom task being run: " + this.id + ", " + this.taskIdentifier );
					}, true, "First task (synchronous)" ).
				withCompleteHandler(
					function( task ) {
						console.log( "First task complete (" + task.id + ")" );
					} );
		
		var task2 =
			new TaskWithClosure(
					function() {
						console.log( "Custom task being run: " + this.id + ", " + this.taskIdentifier );
						
						setTimeout(
							function() {
								console.log( "Task 2 timer complete" );
								
								task2.taskComplete();
							}, 1000 );
						
					}, false, "Second task (asynchronous)" ).
				withCompleteHandler(
					function( task ) {
						console.log( "Second task complete (" + task.id + ")" );
					} );

		var task3 =
			new TaskWithClosure(
					function() {
						console.log( "Custom task being run: " + this.id + ", " + this.taskIdentifier );
					}, true, "Third task (synchronous)" ).
				withCompleteHandler(
					function( task ) {
						console.log( "Third task complete (" + task.id + ")" );
					} );
	
		var compositeTask =
			new CompositeTask( [ task1, task2, task3 ], false ).
				withCompleteHandler(
					function( task ) {
						//console.trace();
						console.log( "CompositeTask complete: " + compositeTask.id + " (" + task.id + ")" );
					} ).
				withStartHandler(
					function( task ) {
						console.log( "CompositeTask started: " + compositeTask.id + " (" + task.id + ")" );
					} );
		compositeTask.run();
	</script>
</body>
</html>